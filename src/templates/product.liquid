{% comment %} Gift cards follow the standard layout closer, and our regular products are quite elaborate so doing this separate here {% endcomment %}
{% if product.type == "Gift Card" %}
	<div class="giftcard">
		{%- assign current_variant = product.selected_or_first_available_variant -%}
		{%- assign featured_image = current_variant.featured_image | default: product.featured_image -%}

		<meta itemprop="name" content="{{ product.title }}{% unless product.has_only_default_variant %} - {{ current_variant.title }}{% endunless %}">
		<meta itemprop="url" content="{{ shop.url }}{{ current_variant.url }}">
		<meta itemprop="brand" content="{{ product.vendor }}">
		<meta itemprop="image" content="{{ featured_image | img_url: '600x600' }}">
		<meta itemprop="description" content="{{ product.description | strip_html | escape }}">

		<div class="container">
			<div class="h1 hidden-sm hidden-md hidden-lg text-center">{{ product.title }}</div>
		  	<div class="row">
		  		<div class="col-sm-8 col-sm-offset-2 col-md-7 col-md-offset-0">
		  			{% if featured_image != blank %}
		  			  <img src="{{ featured_image | img_url: 'master' }}" alt="{{ featured_image.alt | escape }}" data-product-featured-image>
		  			{% endif %}
		  		</div>
		   		<div class="col-sm-8 col-sm-offset-2 col-md-5 col-md-offset-0">
	      			<div class="description">
	      				<h1 class="hidden-xs">{{ product.title }}</h1>
		      			{{ product.description }}
		      		</div>

	      			<div itemprop="offers" itemscope itemtype="http://schema.org/Offer">
	      			  <meta itemprop="priceCurrency" content="{{ shop.currency }}">
	      			  <meta itemprop="price" content="{{ current_variant.price | divided_by: 100.00 }}">
	      			  <link itemprop="availability" href="http://schema.org/{% if current_variant.available %}InStock{% else %}OutOfStock{% endif %}">

	      			  <form action="/cart/add" method="post" enctype="multipart/form-data">
	      			  	
			      			    {% unless product.has_only_default_variant %}
			      			     	{% for option in product.options_with_values %}
			      			     	<div class="selector-wrapper">
		      			     			<p class="variant-label">{{ option.name }}</p>
		      			     			<div class="variant-buttons">
		      			     				{% for value in option.values %}
		      			     					<a href="#" class="btn btn-secondary variant-option gc-option {% if option.selected_value == value %}selected{% endif %}">{{ value }}</a>
		      			     				{%- endfor -%}
		      			     			</div>
			      			     	</div>
			      			
     		      			    	{% comment %} Original selects
     		      			    	<div class="form-group floating-label select-wrapper has-value">
     			      			        <label for="SingleOptionSelector-{{ forloop.index0 }}">
     			      			        	{{ option.name }}
     			      			        </label>
     									<select
     										class="form-control"
     										id="SingleOptionSelector-{{ forloop.index0 }}"
     										data-single-option-selector
     										data-index="option{{ option.position }}">
     										{% for value in option.values %}
     										  <option
     										    value="{{ value | escape }}"
     										    {% if option.selected_value == value %}selected="selected"{% endif %}>
     										      {{ value }}
     										  </option>
     										{% endfor %}
     									</select>
     		      			        </div>{% endcomment %}
			      			      {% endfor %}
			      			    {% endunless %}

			      			    <select name="id" class="hidden" data-product-select>
			      			      {% for variant in product.variants %}
			      			        <option
			      			          {% if variant == current_variant %}selected="selected"{% endif %}
			      			          {% unless variant.available %}disabled="disabled"{% endunless %}
			      			          value="{{ variant.id }}">
			      			            {{ variant.title }}
			      			        </option>
			      			      {% endfor %}
			      			    </select>

			      			    <input type="hidden" name="properties[Image]" value="{{ featured_image | img_url: 'master' }}" data-variant-image>
								
								<div class="hidden">
									<label for="Quantity">{{ 'products.product.quantity' | t }}</label>
									<input type="number" id="Quantity" name="quantity" value="1" min="1" disabled>
								</div>

			      			    <button
			      			    	type="submit"
			      			    	name="add"
			      			    	class="btn btn-lg"
			      			     	data-add-to-cart>
		      			        	{{ 'products.product.add_to_cart' | t }}	
			      			    </button>
	      			  	
	      			  </form>

	    			</div>
	    		</div>
			</div>
		</div>
		
		{% comment %} not needed for gift cards, but we need it to keep our js happy {% endcomment %}
		{%- capture variantStockData -%}
		{
			{%- for variant in product.variants -%}
				"{{ variant.id }}" : {
					"stockLevel" : "{{ variant.inventory_quantity }}",
					"restockMessage" : "{{ variant.metafields['global']['restock-expected'] }}"
				},
			{%- endfor -%}
		}
		{%- endcapture -%}

		{% unless product == empty %}
		  <script type="application/json" data-product-json>
		    {{ product | json }}
		  </script>
		  <script>
		  var variantStockData = {{ variantStockData }};
		  </script>
		{% endunless %}
	</div>
{% else %}

	{% comment %} regular products {% endcomment %}
	{% section 'product' %}

{% endif %}
