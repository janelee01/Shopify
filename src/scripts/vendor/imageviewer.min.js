!function(e,t,i){"use strict";function n(e,t,i,n){return e/=n,e--,-i*(e*e*e*e-1)+t}function o(e){return e.complete&&("undefined"==typeof e.naturalWidth||0!==e.naturalWidth)}function a(e,t){this.container=e,this.onStart=t.onStart||s,this.onMove=t.onMove||s,this.onEnd=t.onEnd||s,this.sliderId=t.sliderId||"slider"+Math.ceil(1e6*Math.random())}function r(e,i){var n=this;if("iv-container"===e.id&&(n._fullPage=!0),n.container=e,i=n.options=Object.assign({},r.defaults,i),n.zoomValue=100,!e.querySelector(".iv-snap-view")){var o=t.createElement("div");o.innerHTML=h,e.insertBefore(o,e.firstChild)}e.classList.add("iv-container"),"static"===getComputedStyle(e).position&&(e.style.position="relative"),n.snapView=e.querySelector(".iv-snap-view"),n.snapImageWrap=e.querySelector(".iv-snap-image-wrap"),n.imageWrap=e.querySelector(".iv-image-wrap"),n.snapHandle=e.querySelector(".iv-snap-handle"),n.zoomHandle=e.querySelector(".iv-zoom-handle"),n._viewerId="iv"+Math.floor(1e6*Math.random())}var s=function(){},l={container:{},document:{},imageWrap:{},window:{}},c=15,m=5;!function(){for(var t=0,i=["ms","moz","webkit","o"],n=0;n<i.length&&!e.requestAnimationFrame;++n)e.requestAnimationFrame=e[i[n]+"RequestAnimationFrame"],e.cancelAnimationFrame=e[i[n]+"CancelAnimationFrame"]||e[i[n]+"CancelRequestAnimationFrame"];e.requestAnimationFrame||(e.requestAnimationFrame=function(i,n){var o=(new Date).getTime(),a=Math.max(0,16-(o-t)),r=e.setTimeout(function(){i(o+a)},a);return t=o+a,r}),e.cancelAnimationFrame||(e.cancelAnimationFrame=function(e){clearTimeout(e)})}();var h='<div class="iv-loader"></div> <div class="iv-snap-view"><div class="iv-snap-image-wrap"><div class="iv-snap-handle"></div></div><div class="iv-zoom-slider"><div class="iv-zoom-handle"></div></div></div><div class="iv-image-view" ><div class="iv-image-wrap" ></div></div>';t.addEventListener("DOMContentLoaded",function(){var e=t.createElement("div");e.id="iv-container",e.innerHTML=h+'<div class="iv-close"></div>',t.body.appendChild(e)}),a.prototype.init=function(){var e=this;this.container;return l.container.touchMouse=function(i){i.preventDefault();var n="touchstart"==i.type?"touchmove":"mousemove",o="touchstart"==i.type?"touchend":"mouseup",i=i,a=i.clientX||i.touches[0].clientX,r=i.clientY||i.touches[0].clientY,s=e.onStart(i,{x:a,y:r});if(s!==!1){var l=function(t){t.preventDefault();var i=t.clientX||t.touches[0].clientX,n=t.clientY||t.touches[0].clientY;e.onMove(t,{dx:i-a,dy:n-r,mx:i,my:n})},c=function(){t.removeEventListener(n,l),t.removeEventListener(o,c),e.onEnd()};t.addEventListener(n,l),t.addEventListener(o,c)}},["touchstart","mousedown"].forEach(function(t){e.container.addEventListener(t,l.container.touchMouse)}),this},r.prototype={constructor:r,_init:function(){function i(e){r.snapView&&(E||o.zoomValue<=100||!o.loaded||(clearTimeout(M),E=!0,o.snapView.style.opacity=1,e||(M=setTimeout(function(){o.snapView.style.opacity=0,E=!1},4e3))))}var o=this,r=o.options,s=!1,h=this.container,d=this.snapHandle,u=this.snapImageWrap,p=this.imageWrap,v=new a(u,{sliderId:o._viewerId,onStart:function(){if(!o.loaded)return!1;var e=d.style;this.curHandleTop=parseFloat(e.top),this.curHandleLeft=parseFloat(e.left),this.handleWidth=parseFloat(e.width),this.handleHeight=parseFloat(e.height),this.width=parseInt(getComputedStyle(u).width,10),this.height=parseInt(getComputedStyle(u).height,10),clearInterval(g.slideMomentumCheck),cancelAnimationFrame(g.sliderMomentumFrame)},onMove:function(e,t){var i=this.curHandleLeft+100*t.dx/this.width,n=this.curHandleTop+100*t.dy/this.height;i=Math.max(0,i),i=Math.min(100-this.handleWidth,i),n=Math.max(0,n),n=Math.min(100-this.handleHeight,n);var a=o.containerDim,r=o.imageDim.w*(o.zoomValue/100),s=o.imageDim.h*(o.zoomValue/100),l=r<a.w?(a.w-r)/2:-r*i/100,c=s<a.h?(a.h-s)/2:-s*n/100;d.style.top=n+"%",d.style.left=i+"%",o.currentImg.style.left=l+"px",o.currentImg.style.top=c+"px"}}).init(),g=o._imageSlider=new a(p,{sliderId:o._viewerId,onStart:function(e,t){if(!o.loaded)return!1;if(!s){var i=this;v.onStart(),i.imgWidth=o.imageDim.w*o.zoomValue/100,i.imgHeight=o.imageDim.h*o.zoomValue/100,i.positions=[t,t],i.startPosition=t,o._clearFrames(),i.slideMomentumCheck=setInterval(function(){i.currentPos&&(i.positions.shift(),i.positions.push({x:i.currentPos.mx,y:i.currentPos.my}))},50)}},onMove:function(e,t){s||(this.currentPos=t,v.onMove(e,{dx:-t.dx*v.width/this.imgWidth,dy:-t.dy*v.height/this.imgHeight}))},onEnd:function(){function e(){60>=a&&(t.sliderMomentumFrame=requestAnimationFrame(e)),r+=n(a,i/3,-i/3,60),l+=n(a,o/3,-o/3,60),v.onMove(null,{dx:-(r*v.width/t.imgWidth),dy:-(l*v.height/t.imgHeight)}),a++}if(!s){var t=this,i=this.positions[1].x-this.positions[0].x,o=this.positions[1].y-this.positions[0].y;if(Math.abs(i)>30||Math.abs(o)>30){var a=1,r=t.currentPos.dx,l=t.currentPos.dy;e()}}}}).init(),f=0;l.imageWrap.mouseWheel=function(e){if(r.zoomOnMouseWheel&&o.loaded){o._clearFrames();var n=Math.max(-1,Math.min(1,e.wheelDelta||-e.detail)),a=o.zoomValue*(100+n*c)/100;if(a>=100&&a<=r.maxZoom?f=0:f+=Math.abs(n),!(f>m)){e.preventDefault();var s=h.getBoundingClientRect(),l=(e.pageX||e.pageX)-(s.left+t.body.scrollLeft),d=(e.pageY||e.pageY)-(s.top+t.body.scrollTop);o.zoom(a,{x:l,y:d}),i()}}},["mousewheel","DOMMouseScroll"].forEach(function(e){p.addEventListener(e,l.imageWrap.mouseWheel)}),l.imageWrap.touchStart=function(e){if(o.loaded){var i=e.touches[0],n=e.touches[1];if(i&&n){s=!0;var a=h.getBoundingClientRect(),r=Math.sqrt(Math.pow(n.pageX-i.pageX,2)+Math.pow(n.pageY-i.pageY,2)),l=o.zoomValue,c={x:(n.pageX+i.pageX)/2-(a.left+t.body.scrollLeft),y:(n.pageY+i.pageY)/2-(a.top+t.body.scrollTop)},m=function(e){e.preventDefault();var t=e.touches[0],i=e.touches[1],n=Math.sqrt(Math.pow(i.pageX-t.pageX,2)+Math.pow(i.pageY-t.pageY,2)),a=l+(n-r)/2;o.zoom(a,c)},d=function(){t.removeEventListener("touchmove",m),t.removeEventListener("touchend",d),s=!1};t.addEventListener("touchmove",m),t.addEventListener("touchend",d)}}},p.addEventListener("touchstart",l.imageWrap.touchStart);var y,w=0;l.imageWrap.click=function(e){0==w?(w=Date.now(),y={x:e.pageX,y:e.pageY}):Date.now()-w<500&&Math.abs(e.pageX-y.x)<50&&Math.abs(e.pageY-y.y)<50?(o.zoomValue==r.zoomValue?o.zoom(200):o.resetZoom(),w=0):w=0},p.addEventListener("click",l.imageWrap.click);var M,E,S=o.snapView.querySelector(".iv-zoom-slider");new a(S,{sliderId:o._viewerId,onStart:function(e){return o.loaded?(this.leftOffset=S.getBoundingClientRect().left+t.body.scrollLeft,this.handleWidth=parseInt(getComputedStyle(o.zoomHandle).width,10),void this.onMove(e)):!1},onMove:function(e,t){var i=(e.pageX||e.touches[0].pageX)-this.leftOffset-this.handleWidth/2;i=Math.max(0,i),i=Math.min(o._zoomSliderLength,i);var n=100+(r.maxZoom-100)*i/o._zoomSliderLength;o.zoom(n)}}).init();l.imageWrap.touchMouseMove=function(e){i()},["touchMove","mouseMove"].forEach(function(e){p.addEventListener(e,l.imageWrap.touchMouseMove)}),l.imageWrap.mouseEnter=function(e){E=!1,i(!0)},["mouseEnter","touchStart"].forEach(function(e){p.addEventListener(e,l.imageWrap.mouseEnter)}),l.imageWrap.mouseLeave=function(e){E=!1,i()},["mouseleave","touchend"].forEach(function(e){p.addEventListener(e,l.imageWrap.mouseLeave)}),r.refreshOnResize&&(l.window.windowResize=function(){o.refresh()},e.addEventListener("resize",l.window.windowResize)),o._fullPage&&(l.container.prevDef=function(e){e.preventDefault()},["touchmove","mousewheel","DOMMouseScroll"].forEach(function(e){h.addEventListener(e,l.container.prevDef)}),l.container.ivCloseClick=function(){o.hide()},h.querySelector(".iv-close").addEventListener("click",l.container.ivCloseClick))},zoom:function(e,t){function i(){h++,20>h&&(o._zoomFrame=requestAnimationFrame(i));var l=n(h,r,e-r,20),d=l/r,f=o.imageDim.w*l/100,y=o.imageDim.h*l/100,w=-((t.x-c)*d-t.x),M=-((t.y-m)*d-t.y);w=Math.min(w,u),M=Math.min(M,p),v>w+f&&(w=v-f),g>M+y&&(M=g-y),s.style.height=y+"px",s.style.width=f+"px",s.style.left=w+"px",s.style.top=M+"px",o.zoomValue=l,o._resizeHandle(f,y,w,M),o.zoomHandle.style.left=(l-100)*o._zoomSliderLength/(a-100)+"px"}e=Math.round(Math.max(100,e)),e=Math.min(this.options.maxZoom,e),t=t||{x:this.containerDim.w/2,y:this.containerDim.h/2};var o=this,a=this.options.maxZoom,r=this.zoomValue,s=this.currentImg,l=this.containerDim,c=parseFloat(getComputedStyle(s).left),m=parseFloat(getComputedStyle(s).top);o._clearFrames();var h=0,l=o.containerDim,d=o.imageDim,u=(l.w-d.w)/2,p=(l.h-d.h)/2,v=l.w-u,g=l.h-p;i()},_clearFrames:function(){clearInterval(this._imageSlider.slideMomentumCheck),cancelAnimationFrame(this._imageSlider.sliderMomentumFrame),cancelAnimationFrame(this._zoomFrame)},resetZoom:function(){this.zoom(this.options.zoomValue)},_calculateDimensions:function(){var e=this,t=e.currentImg,i=e.container,n=e.snapView,o=parseInt(getComputedStyle(t).width,10),a=parseInt(getComputedStyle(t).height,10),r=parseInt(getComputedStyle(i).width,10),s=parseInt(getComputedStyle(i).height,10),l=n.clientWidth,c=n.clientHeight;e.containerDim={w:r,h:s};var m,h,d=o/a;m=o>a&&s>=r||d*s>r?r:d*s,h=m/d,e.imageDim={w:m,h:h},t.style.width=m+"px",t.style.height=h+"px",t.style.left=(r-m)/2+"px",t.style.top=(s-h)/2+"px",t.style.maxWidth="none",t.style.maxHeight="none";var u=m>h?l:m*c/h,p=h>m?c:h*l/m;e.snapImg.style.width=u+"px",e.snapImg.style.height=p+"px",e._zoomSliderLength=l-e.zoomHandle.offsetWidth},refresh:function(){this.loaded&&(this._calculateDimensions(),this.resetZoom())},_resizeHandle:function(e,t,i,n){var o=this.currentImg,a=e||this.imageDim.w*this.zoomValue/100,r=t||this.imageDim.h*this.zoomValue/100,s=Math.max(100*-(i||parseFloat(getComputedStyle(o).left))/a,0),l=Math.max(100*-(n||parseFloat(getComputedStyle(o).top))/r,0),c=Math.min(100*this.containerDim.w/a,100),m=Math.min(100*this.containerDim.h/r,100);this.snapHandle.style.top=l+"%",this.snapHandle.style.left=s+"%",this.snapHandle.style.width=c+"%",this.snapHandle.style.height=m+"%"},show:function(e,i){var n=this;this._fullPage&&(this.container.style.display="block",e&&this.load(e,i),l.document.escape=function(e){(27===e.keyCode||"Escape"===e.key)&&n.hide()},t.addEventListener("keyup",l.document.escape))},hide:function(){this._fullPage&&(this.container.style.display="none",t.removeEventListener("keyup",l.document.escape))},options:function(e,t){return t?void(this.options[e]=t):this.options[e]},destroy:function(t,i){return this._fullPage?(container.querySelector(".iv-close").removeEventListener("click",l.container.ivCloseClick).DOMMouseScroll.forEach(function(e){container.removeEventListener(e,l.container.prevDef)}).mousedown.forEach(function(e){container.removeEventListener(e,l.container.touchMouse)}).DOMMouseScroll.forEach(function(e){imageWrap.removeEventListener(e,l.imageWrap.mouseWheel)}).mouseMove.forEach(function(e){imageWrap.removeEventListener(e,l.imageWrap.touchMouseMove)}).touchStart.forEach(function(e){imageWrap.removeEventListener(e,l.imageWrap.mouseEnter)}).touchend.forEach(function(e){imageWrap.removeEventListener(e,l.imageWrap.mouseLeave)}),imageWrap.removeEventListener("touchstart",l.imageWrap.touchStart)):this.container.remove('[class^="iv"]'),e.removeEventListener("resize",l.window.windowResize),null},load:function(e,i){function n(){a.loaded=!0,a.zoomValue=100,m.style.display="block",a.snapImg.style.display="inline",a.refresh(),a.resetZoom(),r.querySelector(".iv-loader").style.display="none"}var a=this,r=this.container;r.querySelectorAll(".iv-snap-image,.iv-large-image").forEach(function(e){e.parentNode.removeChild(e)});var s=this.container.querySelector(".iv-snap-image-wrap"),l=t.createElement("img");l.src=e;var c=l.cloneNode();l.className="iv-snap-image",s.insertBefore(l,s.firstChild),c.className="iv-large-image",i&&(c.src=i),this.imageWrap.insertBefore(c,this.imageWrap.firstChild);var m=this.currentImg=this.container.querySelector(".iv-large-image");this.snapImg=this.container.querySelector(".iv-snap-image"),a.loaded=!1,r.querySelector(".iv-loader").style.display="block",m.style.display="none",a.snapImg.style.display="none",o(m)?n():m.addEventListener("load",n)}},r.defaults={zoomValue:100,snapView:!0,maxZoom:500,refreshOnResize:!0,zoomOnMouseWheel:!0},e.ImageViewer=function(e,i){var n,o,a;if(e&&("string"==typeof e||e instanceof Element||e[0]instanceof Element)||(i=e,e=t.getElementById("iv-container")),"string"==typeof e&&(e=t.querySelector(e)),"IMG"===e.tagName){n=e,o=n.src,a=n.getAttribute("high-res-src")||n.getAttribute("data-high-res-src");var s=n.parentNode;s.removeChild(n),n.style.opacity=0,n.style.position="relative",n.style.zIndex=-1;var l=t.createElement("div");l.className="iv-container",l.style.display="inline-block",l.style.overflow="hidden",l.appendChild(n),s.appendChild(l),e=l}else o=e.getAttribute("src")||e.getAttribute("data-src"),a=e.getAttribute("high-res-src")||e.getAttribute("data-high-res-src");var c=new r(e,i);return c._init(),o&&c.load(o,a),c}}(window,document);
