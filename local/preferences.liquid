<!DOCTYPE html>
<html lang="en">
<head>
 <meta charset="utf-8">
 <meta http-equiv="X-UA-Compatible" content="IE=edge">
 <meta name="viewport" content="width=device-width, initial-scale=1">
 <link rel="stylesheet" href="https://cdn.shopify.com/s/files/1/2185/1497/t/11/assets/theme.scss.css?1">
 <style>
  #site-logo{
    margin-top: 28px;
  }
  form .row [class^="col-"] {
    padding: 0 5px;
  }
  form .row {
    margin-left: -5px;
    margin-right: -5px;
  }
  .errors ul li{
    padding: 10px;
  }
 </style>
</head>
<body>

 <div class="container">

  <a href="https://www.loandsons.com/" id="site-logo">{{ shop.name }}</a>

 <div class="section-heading is-page-title">
   <h1 class="title">Email Preferences</h1>
 </div>
  <div class="row">
    <div class="col-sm-9 col-sm-offset-3 col-md-6 col-md-offset-3">
      <form action="" id="preferences_form" method="POST" role="form" style="margin-bottom: 30px">
        
        {% if form.non_field_errors %}
        <div class="errors">
        <ul>
        {% for error in form.non_field_errors %}
          <li>{{ error }}</li>
        {% endfor %}
        </ul>
        </div>
        {% endif %}

        {% if form.errors %}
        <div class="errors">
        <ul>
        {% for error in form.errors %}
          <li>{{ error }}</li>
        {% endfor %}
        </ul>
        </div>
        {% endif %}
        
        <input type="hidden" name="$fields" value="Birthday,StreetAddress,EmailPreferences,EmailInterests" />
        <input type="hidden" name="$list_fields" value="EmailPreferences,EmailInterests" />
        <!-- <input type="hidden" name="$unsubscribed_url" value="/p/preferences_updated" /> -->
        <!-- <input type="hidden" name="$updated_profile_url" value="/p/preferences_updated" /> -->

        <div class="form-group floating-label {% if request.POST|lookup:'$email' or person|lookup:'email' %}has-value{% endif %}">
          <label for="email">Email Address<span class="required">*</span></label>
          <input type="email"
            class="form-control required"
            name="$email"
            id="email"
            placeholder="Email Address*"
            autofocus
            value="{% if request.POST|lookup:'$email' %}{{ request.POST|lookup:'$email' }}{% else %}{{ person.email|default:'' }}{% endif %}">
          <div class="validation-error">Please enter a valid email address.</div>
        </div>
            
        <div class="form-group floating-label {% if request.POST|lookup:'$first_name' or person|lookup:'first_name' %}has-value{% endif %}">
          <label for="first_name">First Name</label>
          <input type="text"
            class="form-control"
            name="$first_name"
            id="first_name"
            placeholder="First Name"
            value="{% if request.POST|lookup:'$email' %}{{ request.POST|lookup:'$first_name' }}{% else %}{{ person.first_name|default:'' }}{% endif %}">
          <div class="validation-error">This field is required.</div>
        </div>

        <div class="form-group floating-label {% if request.POST|lookup:'$last_name' or person|lookup:'last_name' %}has-value{% endif %}">
          <label for="last_name">Last Name</label>
          <input type="text"
            class="form-control"
            name="$last_name"
            id="last_name"
            placeholder="Last Name"
            value="{% if request.POST|lookup:'$email' %}{{ request.POST|lookup:'$last_name' }}{% else %}{{ person.last_name|default:'' }}{% endif %}">
          <div class="validation-error">This field is required.</div>
        </div>

        <div class="row">
          <div class="col-sm-5">
            <div class="form-group select-wrapper floating-label {% if person.Birthday %}has-value{% endif %}">
              <label for="birthday_month">Birth Month</label>
              <select id="birthday_month" class="form-control" name="Birthday_month">
                <option value="">Birth Month</option>
                <option value="01" {% if request.POST|lookup:'Birthday_month' == '01' or person.Birthday|split:'/'|lookup:0 == '01' %}selected="selected"{% endif %}>January</option>
                <option value="02" {% if request.POST|lookup:'Birthday_month' == '02' or person.Birthday|split:'/'|lookup:0 == '02' %}selected="selected"{% endif %}>February</option>
                <option value="03" {% if request.POST|lookup:'Birthday_month' == '03' or person.Birthday|split:'/'|lookup:0 == '03' %}selected="selected"{% endif %}>March</option>
                <option value="04" {% if request.POST|lookup:'Birthday_month' == '04' or person.Birthday|split:'/'|lookup:0 == '04' %}selected="selected"{% endif %}>April</option>
                <option value="05" {% if request.POST|lookup:'Birthday_month' == '05' or person.Birthday|split:'/'|lookup:0 == '05' %}selected="selected"{% endif %}>May</option>
                <option value="06" {% if request.POST|lookup:'Birthday_month' == '06' or person.Birthday|split:'/'|lookup:0 == '06' %}selected="selected"{% endif %}>June</option>
                <option value="07" {% if request.POST|lookup:'Birthday_month' == '07' or person.Birthday|split:'/'|lookup:0 == '07' %}selected="selected"{% endif %}>July</option>
                <option value="08" {% if request.POST|lookup:'Birthday_month' == '08' or person.Birthday|split:'/'|lookup:0 == '08' %}selected="selected"{% endif %}>August</option>
                <option value="09" {% if request.POST|lookup:'Birthday_month' == '09' or person.Birthday|split:'/'|lookup:0 == '09' %}selected="selected"{% endif %}>September</option>
                <option value="10" {% if request.POST|lookup:'Birthday_month' == '10' or person.Birthday|split:'/'|lookup:0 == '10' %}selected="selected"{% endif %}>October</option>
                <option value="11" {% if request.POST|lookup:'Birthday_month' == '11' or person.Birthday|split:'/'|lookup:0 == '11' %}selected="selected"{% endif %}>November</option>
                <option value="12" {% if request.POST|lookup:'Birthday_month' == '12' or person.Birthday|split:'/'|lookup:0 == '12' %}selected="selected"{% endif %}>December</option>
            </select>
            </div>
          </div>
          <div class="col-sm-3">
            <div class="form-group select-wrapper floating-label {% if person.Birthday %}has-value{% endif %}">
              <label for="birthday_day">Day</label>
              <select id="birthday_day" class="form-control" name="Birthday_day">
                <option value="">Day</option>
                <option value="01"{% if request.POST|lookup:'Birthday_day' == '01' or person.Birthday|split:'/'|lookup:1 == '01' %}selected="selected"{% endif %}>1</option>
                <option value="02"{% if request.POST|lookup:'Birthday_day' == '02' or person.Birthday|split:'/'|lookup:1 == '02' %}selected="selected"{% endif %}>2</option>
                <option value="03"{% if request.POST|lookup:'Birthday_day' == '03' or person.Birthday|split:'/'|lookup:1 == '03' %}selected="selected"{% endif %}>3</option>
                <option value="04"{% if request.POST|lookup:'Birthday_day' == '04' or person.Birthday|split:'/'|lookup:1 == '04' %}selected="selected"{% endif %}>4</option>
                <option value="05"{% if request.POST|lookup:'Birthday_day' == '05' or person.Birthday|split:'/'|lookup:1 == '05' %}selected="selected"{% endif %}>5</option>
                <option value="06"{% if request.POST|lookup:'Birthday_day' == '06' or person.Birthday|split:'/'|lookup:1 == '06' %}selected="selected"{% endif %}>6</option>
                <option value="07"{% if request.POST|lookup:'Birthday_day' == '07' or person.Birthday|split:'/'|lookup:1 == '07' %}selected="selected"{% endif %}>7</option>
                <option value="08"{% if request.POST|lookup:'Birthday_day' == '08' or person.Birthday|split:'/'|lookup:1 == '08' %}selected="selected"{% endif %}>8</option>
                <option value="09"{% if request.POST|lookup:'Birthday_day' == '09' or person.Birthday|split:'/'|lookup:1 == '09' %}selected="selected"{% endif %}>9</option>
                <option value="10"{% if request.POST|lookup:'Birthday_day' == '10' or person.Birthday|split:'/'|lookup:1 == '10' %}selected="selected"{% endif %}>10</option>
                <option value="11"{% if request.POST|lookup:'Birthday_day' == '11' or person.Birthday|split:'/'|lookup:1 == '11' %}selected="selected"{% endif %}>11</option>
                <option value="12"{% if request.POST|lookup:'Birthday_day' == '12' or person.Birthday|split:'/'|lookup:1 == '12' %}selected="selected"{% endif %}>12</option>
                <option value="13"{% if request.POST|lookup:'Birthday_day' == '13' or person.Birthday|split:'/'|lookup:1 == '13' %}selected="selected"{% endif %}>13</option>
                <option value="14"{% if request.POST|lookup:'Birthday_day' == '14' or person.Birthday|split:'/'|lookup:1 == '14' %}selected="selected"{% endif %}>14</option>
                <option value="15"{% if request.POST|lookup:'Birthday_day' == '15' or person.Birthday|split:'/'|lookup:1 == '15' %}selected="selected"{% endif %}>15</option>
                <option value="16"{% if request.POST|lookup:'Birthday_day' == '16' or person.Birthday|split:'/'|lookup:1 == '16' %}selected="selected"{% endif %}>16</option>
                <option value="17"{% if request.POST|lookup:'Birthday_day' == '17' or person.Birthday|split:'/'|lookup:1 == '17' %}selected="selected"{% endif %}>17</option>
                <option value="18"{% if request.POST|lookup:'Birthday_day' == '18' or person.Birthday|split:'/'|lookup:1 == '18' %}selected="selected"{% endif %}>18</option>
                <option value="19"{% if request.POST|lookup:'Birthday_day' == '19' or person.Birthday|split:'/'|lookup:1 == '19' %}selected="selected"{% endif %}>19</option>
                <option value="20"{% if request.POST|lookup:'Birthday_day' == '20' or person.Birthday|split:'/'|lookup:1 == '20' %}selected="selected"{% endif %}>20</option>
                <option value="21"{% if request.POST|lookup:'Birthday_day' == '21' or person.Birthday|split:'/'|lookup:1 == '21' %}selected="selected"{% endif %}>21</option>
                <option value="22"{% if request.POST|lookup:'Birthday_day' == '22' or person.Birthday|split:'/'|lookup:1 == '22' %}selected="selected"{% endif %}>22</option>
                <option value="23"{% if request.POST|lookup:'Birthday_day' == '23' or person.Birthday|split:'/'|lookup:1 == '23' %}selected="selected"{% endif %}>23</option>
                <option value="24"{% if request.POST|lookup:'Birthday_day' == '24' or person.Birthday|split:'/'|lookup:1 == '24' %}selected="selected"{% endif %}>24</option>
                <option value="25"{% if request.POST|lookup:'Birthday_day' == '25' or person.Birthday|split:'/'|lookup:1 == '25' %}selected="selected"{% endif %}>25</option>
                <option value="26"{% if request.POST|lookup:'Birthday_day' == '26' or person.Birthday|split:'/'|lookup:1 == '26' %}selected="selected"{% endif %}>26</option>
                <option value="27"{% if request.POST|lookup:'Birthday_day' == '27' or person.Birthday|split:'/'|lookup:1 == '27' %}selected="selected"{% endif %}>27</option>
                <option value="28"{% if request.POST|lookup:'Birthday_day' == '28' or person.Birthday|split:'/'|lookup:1 == '28' %}selected="selected"{% endif %}>28</option>
                <option value="29"{% if request.POST|lookup:'Birthday_day' == '29' or person.Birthday|split:'/'|lookup:1 == '29' %}selected="selected"{% endif %}>29</option>
                <option value="30"{% if request.POST|lookup:'Birthday_day' == '30' or person.Birthday|split:'/'|lookup:1 == '30' %}selected="selected"{% endif %}>30</option>
                <option value="31"{% if request.POST|lookup:'Birthday_day' == '31' or person.Birthday|split:'/'|lookup:1 == '31' %}selected="selected"{% endif %}>31</option>
              </select>
            </div>
          </div>
          <div class="col-sm-4">
            <div class="form-group floating-label {% if request.POST|lookup:'Birthday_year' or person.Birthday %}has-value{% endif %}">
              <label for="birthday_year">Year</label>
              <input type="text"
                class="form-control"
                name="Birthday_year"
                id="birthday_year"
                placeholder="Year (YYYY)"
                pattern="\d*"
                minlength="4"
                maxlength="4"
                value="{% if request.POST|lookup:'$email' %}{{ request.POST|lookup:'Birthday_year' }}{% else %}{{ person.Birthday|split:'/'|lookup:2|default:'' }}{% endif %}">
              <div class="validation-error">This field is required.</div>
            </div>
          </div>
        </div>
          
        <input type="hidden" id="birthday" name="Birthday" value="{% if request.POST|lookup:'$email' %}{{ request.POST|lookup:'Birthday' }}{% else %}{{ person.Birthday|default:'' }}{% endif %}" />
        <div id="birthday-error" class="validation-error form-group">Please fill in all fields for your birthday.</div>

        <div class="form-group floating-label {% if request.POST|lookup:'StreetAddress' or person|lookup:'StreetAddress' %}has-value{% endif %}">
          <label for="street-address">Street Address</label>
          <input type="text"
            class="form-control"
            name="StreetAddress"
            id="street-address"
            placeholder="Street Address"
            value="{% if request.POST|lookup:'$email' %}{{ request.POST|lookup:'StreetAddress' }}{% else %}{{ person|lookup:'StreetAddress'|default:'' }}{% endif %}">
        </div>

        <div class="form-group floating-label {% if request.POST|lookup:'$city' or person|lookup:'$city' %}has-value{% endif %}">
          <label for="city">City</label>
          <input type="text"
            class="form-control"
            name="$city"
            id="city"
            placeholder="City"
            value="{% if request.POST|lookup:'$email' %}{{ request.POST|lookup:'$city' }}{% else %}{{ person|lookup:'$city'|default:'' }}{% endif %}">
        </div>

        <div class="row">
          <div class="col-sm-8">
            <div class="form-group select-wrapper floating-label {% if person|lookup:'$region' %}has-value{% endif %}">
              <label for="state">State</label>
              <select id="state" class="form-control" name="$region">
                <option value="">State</option>
                <option value="Alabama" {% if request.POST|lookup:'$region' == 'Alabama' or person|lookup:'$region' == 'Alabama' %}selected="selected"{% endif %}>Alabama</option>
                <option value="Alaska" {% if request.POST|lookup:'$region' == 'Alaska' or person|lookup:'$region' == 'Alaska' %}selected="selected"{% endif %}>Alaska</option>
                <option value="American Samoa" {% if request.POST|lookup:'$region' == 'American Samoa' or person|lookup:'$region' == 'American Samoa' %}selected="selected"{% endif %}>American Samoa</option>
                <option value="Arizona" {% if request.POST|lookup:'$region' == 'Arizona' or person|lookup:'$region' == 'Arizona' %}selected="selected"{% endif %}>Arizona</option>
                <option value="Arkansas" {% if request.POST|lookup:'$region' == 'Arkansas' or person|lookup:'$region' == 'Arkansas' %}selected="selected"{% endif %}>Arkansas</option>
                <option value="California" {% if request.POST|lookup:'$region' == 'California' or person|lookup:'$region' == 'California' %}selected="selected"{% endif %}>California</option>
                <option value="Colorado" {% if request.POST|lookup:'$region' == 'Colorado' or person|lookup:'$region' == 'Colorado' %}selected="selected"{% endif %}>Colorado</option>
                <option value="Connecticut" {% if request.POST|lookup:'$region' == 'Connecticut' or person|lookup:'$region' == 'Connecticut' %}selected="selected"{% endif %}>Connecticut</option>
                <option value="Delaware" {% if request.POST|lookup:'$region' == 'Delaware' or person|lookup:'$region' == 'Delaware' %}selected="selected"{% endif %}>Delaware</option>
                <option value="District of Columbia" {% if request.POST|lookup:'$region' == 'District of Columbia' or person|lookup:'$region' == 'District of Columbia' %}selected="selected"{% endif %}>District of Columbia</option>
                <option value="Federated States of Micronesia" {% if request.POST|lookup:'$region' == 'Federated States of Micronesia' or person|lookup:'$region' == 'Federated States of Micronesia' %}selected="selected"{% endif %}>Federated States of Micronesia</option>
                <option value="Florida" {% if request.POST|lookup:'$region' == 'Florida' or person|lookup:'$region' == 'Florida' %}selected="selected"{% endif %}>Florida</option>
                <option value="Georgia" {% if request.POST|lookup:'$region' == 'Georgia' or person|lookup:'$region' == 'Georgia' %}selected="selected"{% endif %}>Georgia</option>
                <option value="Guam" {% if request.POST|lookup:'$region' == 'Guam' or person|lookup:'$region' == 'Guam' %}selected="selected"{% endif %}>Guam</option>
                <option value="Hawaii" {% if request.POST|lookup:'$region' == 'Hawaii' or person|lookup:'$region' == 'Hawaii' %}selected="selected"{% endif %}>Hawaii</option>
                <option value="Idaho" {% if request.POST|lookup:'$region' == 'Idaho' or person|lookup:'$region' == 'Idaho' %}selected="selected"{% endif %}>Idaho</option>
                <option value="Illinois" {% if request.POST|lookup:'$region' == 'Illinois' or person|lookup:'$region' == 'Illinois' %}selected="selected"{% endif %}>Illinois</option>
                <option value="Indiana" {% if request.POST|lookup:'$region' == 'Indiana' or person|lookup:'$region' == 'Indiana' %}selected="selected"{% endif %}>Indiana</option>
                <option value="Iowa" {% if request.POST|lookup:'$region' == 'Iowa' or person|lookup:'$region' == 'Iowa' %}selected="selected"{% endif %}>Iowa</option>
                <option value="Kansas" {% if request.POST|lookup:'$region' == 'Kansas' or person|lookup:'$region' == 'Kansas' %}selected="selected"{% endif %}>Kansas</option>
                <option value="Kentucky" {% if request.POST|lookup:'$region' == 'Kentucky' or person|lookup:'$region' == 'Kentucky' %}selected="selected"{% endif %}>Kentucky</option>
                <option value="Louisiana" {% if request.POST|lookup:'$region' == 'Louisiana' or person|lookup:'$region' == 'Louisiana' %}selected="selected"{% endif %}>Louisiana</option>
                <option value="Maine" {% if request.POST|lookup:'$region' == 'Maine' or person|lookup:'$region' == 'Maine' %}selected="selected"{% endif %}>Maine</option>
                <option value="Marshall Islands" {% if request.POST|lookup:'$region' == 'Marshall Islands' or person|lookup:'$region' == 'Marshall Islands' %}selected="selected"{% endif %}>Marshall Islands</option>
                <option value="Maryland" {% if request.POST|lookup:'$region' == 'Maryland' or person|lookup:'$region' == 'Maryland' %}selected="selected"{% endif %}>Maryland</option>
                <option value="Massachusetts" {% if request.POST|lookup:'$region' == 'Massachusetts' or person|lookup:'$region' == 'Massachusetts' %}selected="selected"{% endif %}>Massachusetts</option>
                <option value="Michigan" {% if request.POST|lookup:'$region' == 'Michigan' or person|lookup:'$region' == 'Michigan' %}selected="selected"{% endif %}>Michigan</option>
                <option value="Minnesota" {% if request.POST|lookup:'$region' == 'Minnesota' or person|lookup:'$region' == 'Minnesota' %}selected="selected"{% endif %}>Minnesota</option>
                <option value="Mississippi" {% if request.POST|lookup:'$region' == 'Mississippi' or person|lookup:'$region' == 'Mississippi' %}selected="selected"{% endif %}>Mississippi</option>
                <option value="Missouri" {% if request.POST|lookup:'$region' == 'Missouri' or person|lookup:'$region' == 'Missouri' %}selected="selected"{% endif %}>Missouri</option>
                <option value="Montana" {% if request.POST|lookup:'$region' == 'Montana' or person|lookup:'$region' == 'Montana' %}selected="selected"{% endif %}>Montana</option>
                <option value="Nebraska" {% if request.POST|lookup:'$region' == 'Nebraska' or person|lookup:'$region' == 'Nebraska' %}selected="selected"{% endif %}>Nebraska</option>
                <option value="Nevada" {% if request.POST|lookup:'$region' == 'Nevada' or person|lookup:'$region' == 'Nevada' %}selected="selected"{% endif %}>Nevada</option>
                <option value="New Hampshire" {% if request.POST|lookup:'$region' == 'New Hampshire' or person|lookup:'$region' == 'New Hampshire' %}selected="selected"{% endif %}>New Hampshire</option>
                <option value="New Jersey" {% if request.POST|lookup:'$region' == 'New Jersey' or person|lookup:'$region' == 'New Jersey' %}selected="selected"{% endif %}>New Jersey</option>
                <option value="New Mexico" {% if request.POST|lookup:'$region' == 'New Mexico' or person|lookup:'$region' == 'New Mexico' %}selected="selected"{% endif %}>New Mexico</option>
                <option value="New York" {% if request.POST|lookup:'$region' == 'New York' or person|lookup:'$region' == 'New York' %}selected="selected"{% endif %}>New York</option>
                <option value="North Carolina" {% if request.POST|lookup:'$region' == 'North Carolina' or person|lookup:'$region' == 'North Carolina' %}selected="selected"{% endif %}>North Carolina</option>
                <option value="North Dakota" {% if request.POST|lookup:'$region' == 'North Dakota' or person|lookup:'$region' == 'North Dakota' %}selected="selected"{% endif %}>North Dakota</option>
                <option value="Northern Mariana Islands" {% if request.POST|lookup:'$region' == 'Northern Mariana Islands' or person|lookup:'$region' == 'Northern Mariana Islands' %}selected="selected"{% endif %}>Northern Mariana Islands</option>
                <option value="Ohio" {% if request.POST|lookup:'$region' == 'Ohio' or person|lookup:'$region' == 'Ohio' %}selected="selected"{% endif %}>Ohio</option>
                <option value="Oklahoma" {% if request.POST|lookup:'$region' == 'Oklahoma' or person|lookup:'$region' == 'Oklahoma' %}selected="selected"{% endif %}>Oklahoma</option>
                <option value="Oregon" {% if request.POST|lookup:'$region' == 'Oregon' or person|lookup:'$region' == 'Oregon' %}selected="selected"{% endif %}>Oregon</option>
                <option value="Palau" {% if request.POST|lookup:'$region' == 'Palau' or person|lookup:'$region' == 'Palau' %}selected="selected"{% endif %}>Palau</option>
                <option value="Pennsylvania" {% if request.POST|lookup:'$region' == 'Pennsylvania' or person|lookup:'$region' == 'Pennsylvania' %}selected="selected"{% endif %}>Pennsylvania</option>
                <option value="Puerto Rico" {% if request.POST|lookup:'$region' == 'Puerto Rico' or person|lookup:'$region' == 'Puerto Rico' %}selected="selected"{% endif %}>Puerto Rico</option>
                <option value="Rhode Island" {% if request.POST|lookup:'$region' == 'Rhode Island' or person|lookup:'$region' == 'Rhode Island' %}selected="selected"{% endif %}>Rhode Island</option>
                <option value="South Carolina" {% if request.POST|lookup:'$region' == 'South Carolina' or person|lookup:'$region' == 'South Carolina' %}selected="selected"{% endif %}>South Carolina</option>
                <option value="South Dakota" {% if request.POST|lookup:'$region' == 'South Dakota' or person|lookup:'$region' == 'South Dakota' %}selected="selected"{% endif %}>South Dakota</option>
                <option value="Tennessee" {% if request.POST|lookup:'$region' == 'Tennessee' or person|lookup:'$region' == 'Tennessee' %}selected="selected"{% endif %}>Tennessee</option>
                <option value="Texas" {% if request.POST|lookup:'$region' == 'Texas' or person|lookup:'$region' == 'Texas' %}selected="selected"{% endif %}>Texas</option>
                <option value="Utah" {% if request.POST|lookup:'$region' == 'Utah' or person|lookup:'$region' == 'Utah' %}selected="selected"{% endif %}>Utah</option>
                <option value="Vermont" {% if request.POST|lookup:'$region' == 'Vermont' or person|lookup:'$region' == 'Vermont' %}selected="selected"{% endif %}>Vermont</option>
                <option value="Virgin Islands" {% if request.POST|lookup:'$region' == 'Virgin Islands' or person|lookup:'$region' == 'Virgin Islands' %}selected="selected"{% endif %}>Virgin Islands</option>
                <option value="Virginia" {% if request.POST|lookup:'$region' == 'Virginia' or person|lookup:'$region' == 'Virginia' %}selected="selected"{% endif %}>Virginia</option>
                <option value="Washington" {% if request.POST|lookup:'$region' == 'Washington' or person|lookup:'$region' == 'Washington' %}selected="selected"{% endif %}>Washington</option>
                <option value="West Virginia" {% if request.POST|lookup:'$region' == 'West Virginia' or person|lookup:'$region' == 'West Virginia' %}selected="selected"{% endif %}>West Virginia</option>
                <option value="Wisconsin" {% if request.POST|lookup:'$region' == 'Wisconsin' or person|lookup:'$region' == 'Wisconsin' %}selected="selected"{% endif %}>Wisconsin</option>
                <option value="Wyoming" {% if request.POST|lookup:'$region' == 'Wyoming' or person|lookup:'$region' == 'Wyoming' %}selected="selected"{% endif %}>Wyoming</option>
                <option value="Armed Forces Americas" {% if request.POST|lookup:'$region' == 'Armed Forces Americas' or person|lookup:'$region' == 'Armed Forces Americas' %}selected="selected"{% endif %}>Armed Forces Americas</option>
                <option value="Armed Forces Europe" {% if request.POST|lookup:'$region' == 'Armed Forces Europe' or person|lookup:'$region' == 'Armed Forces Europe' %}selected="selected"{% endif %}>Armed Forces Europe</option>
                <option value="Armed Forces Pacific" {% if request.POST|lookup:'$region' == 'Armed Forces Pacific' or person|lookup:'$region' == 'Armed Forces Pacific' %}selected="selected"{% endif %}>Armed Forces Pacific</option>
              </select>
            </div>
          </div>
          <div class="col-sm-4">
            <div class="form-group floating-label {% if request.POST|lookup:'$zip' or person|lookup:'$zip' %}has-value{% endif %}">
              <label for="zip">Zip Code</label>
              <input type="text"
                class="form-control"
                name="$zip"
                id="zip"
                placeholder="Zip Code"
                value="{% if request.POST|lookup:'$email' %}{{ request.POST|lookup:'$zip' }}{% else %}{{ person|lookup:'$zip'|default:'' }}{% endif %}">
              <div class="validation-error">This field is required.</div>
            </div>
          </div>
        </div>
      
        <div class="form-group">
          <p style="margin:0">Preferences<span class="required">*</span></p>
          <div id="prefs-error" class="validation-error">Please choose at least one.</div>
        </div>
        <div class="form-group checkbox preference">
          <input type="checkbox" id="email_preferences_company" name="EmailPreferences" value="Company" {% if 'Company' in person.EmailPreferences or 'Company' in request.POST.EmailPreferences %}checked="checked"{% elif not person.EmailPreferences and not request.POST.EmailPreferences %}checked="checked"{% endif %} />
          <label for="email_preferences_company">
            Product info &amp; company news
          </label>
        </div>
        <div class="form-group checkbox preference">
          <input type="checkbox" id="email_preferences_travel" name="EmailPreferences" value="Travel" {% if 'Travel' in person.EmailPreferences or 'Travel' in request.POST.EmailPreferences %}checked="checked"{% elif not person.EmailPreferences and not request.POST.EmailPreferences %}checked="checked"{% endif %} />
          <label for="email_preferences_travel">
            Travel tips &amp; stories
          </label>
        </div>
        <div class="form-group checkbox preference">
          <input type="checkbox" id="email_preferences_offers" name="EmailPreferences" value="Offers" {% if 'Offers' in person.EmailPreferences or 'Offers' in request.POST.EmailPreferences %}checked="checked"{% elif not person.EmailPreferences and not request.POST.EmailPreferences %}checked="checked"{% endif %} />
          <label for="email_preferences_offers">
            Special offers &amp; promotions
          </label>
        </div>

        <div class="form-group">
          <p style="margin:0">Interests<span class="required">*</span></p>
          <div id="interests-error" class="validation-error">Please choose at least one.</div>
        </div>
        <div class="form-group checkbox preference">
          <input type="checkbox" id="email_interests_business_travel" name="EmailInterests" value="Business Travel" {% if 'Business Travel' in person.EmailInterests or 'Business Travel' in request.POST.EmailInterests %}checked="checked"{% elif not person.EmailInterests and not request.POST.EmailInterests %}checked="checked"{% endif %} />
          <label for="email_interests_business_travel">
            Business Travel
          </label>
        </div>
        <div class="form-group checkbox preference">
          <input type="checkbox" id="email_interests_leisure_travel" name="EmailInterests" value="Leisure Travel" {% if 'Leisure Travel' in person.EmailInterests or 'Leisure Travel' in request.POST.EmailInterests %}checked="checked"{% elif not person.EmailInterests and not request.POST.EmailInterests %}checked="checked"{% endif %} />
          <label for="email_interests_leisure_travel">
            Leisure Travel
          </label>
        </div>
        
        <div class="form-group checkbox" style="margin: 50px 0">
          <input type="checkbox" id="unsubscribe" name="$unsubscribe" value="true" />
          <label for="unsubscribe">
            Unsubscribe me from all emails.
          </label>
        </div>
        
        <div class="form-actions">
        <button type="submit" class="btn btn-block">Update Preferences</button>
        </div>
        </form>
    </div>
  </div>
 </div>
  
  <footer id="colophon">
    <div class="container text-center">
      <p><a href="https://www.loandsons.com/pages/privacy-and-terms" target="_blank">Privacy Policy</a></p>    
    </div>
  </footer>
 

 <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
 <script src="https://cdn.shopify.com/s/files/1/2185/1497/t/11/assets/theme.js?12599291827236191800"></script>
 
 <script>
 $(function () {

  function isValidEmailAddress(emailAddress) {
      var pattern = /^([a-z\d!#$%&'*+\-\/=?^_`{|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+(\.[a-z\d!#$%&'*+\-\/=?^_`{|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+)*|"((([ \t]*\r\n)?[ \t]+)?([\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*(([ \t]*\r\n)?[ \t]+)?")@(([a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF][a-z\d\-._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]*[a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])\.)+([a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF][a-z\d\-._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]*[a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])\.?$/i;
      return pattern.test(emailAddress);
  };

  function addError(element){
    element.addClass('has-error');
    element.next('.validation-error').show();
  }
  function removeError(element){
    element.removeClass('has-error');
    element.next('.validation-error').hide();
  }
  function validateCheckboxGroup(elements,errorElement){
    var numChecked = 0;
      elements.each(function(){
        if( $(this).is(':checked') ){
          numChecked++;
        }
      });
      if( numChecked < 1 ){
        errorElement.show();
        return false;
      }else{
        errorElement.hide();
        return true;
      }
  }
  function validateBirthday(element,errorElement){
    var v = element.val();
    if( !v ){
      return true; // nothing to match against, so pass it
    }else{
      return v.match(/^(((0)[0-9])|((1)[0-2]))(\/)([0-2][0-9]|(3)[0-1])(\/)\d{4}$/i);
    }
  }

  $('#preferences_form').on('submit', function(e){
    var numErrors = 0;

    $('.errors').hide();

    var $emailField = $('#email');
    if( !isValidEmailAddress( $emailField.val() ) ){
      addError($emailField);
      numErrors++;
    }else{
      removeError($emailField);
    }

    // only validate if unsubscribe isn't checked
    if( !$('#unsubscribe').is(':checked') ){
      $('input[type="text"].required').each(function(){
        if( !$(this).val() ){
          addError($(this));
          numErrors++;
        }else{
          removeError($(this));
        }
      });

      if( !validateCheckboxGroup( $('[name="EmailPreferences"]'), $('#prefs-error') ) ){
        numErrors++;
      }
      if( !validateCheckboxGroup( $('[name="EmailInterests"]'), $('#interests-error') ) ){
        numErrors++;
      }

      var $birthday = $('#birthday');
      // if they clear out their selections
      if( $birthday.val() == '//'){
        $birthday.val('');
      }
      if( !validateBirthday( $birthday ) ){
        numErrors++; 
        $('#birthday-error').show();
      }else{
        $('#birthday-error').hide();
      }

    }
    // console.log(numErrors);
    if( numErrors > 0 ){
      e.preventDefault();
    }

  });

  // clear interests as a visual confirmation of unsubscribe action
  $('#unsubscribe').on('change', function () {
    if( $(this).is(':checked') ){
      $('.checkbox.preference input').prop('checked', false);
    }
  });

  // clear unsubscribe if interest is checked
  $('.checkbox.preference input').on('change', function(){
    if( $(this).is(':checked') ){
      $('#unsubscribe').prop('checked', false);
    }
  });

  function getBirthday(){
    var birthday = $('#birthday').val();
    if( !birthday ){
      return ['','','']; // nothing set yet, so give us something to .join() below. doing this here so birthday can be sent blank if no edits are made
    }else{
      return birthday.split('/');
    }
  };

  // update the hidden birthday field as mm/dd/yyyy
  $('#birthday_month').on('change', function(){
    var birthday = getBirthday();
    var newBirthday = [$('#birthday_month').val(), birthday[1], birthday[2]];
    $('#birthday').val( newBirthday.join('/') );
  });

  $('#birthday_day').on('change', function(){
    var birthday = getBirthday();
    var newBirthday = [birthday[0], $('#birthday_day').val(), birthday[2]];
    $('#birthday').val( newBirthday.join('/') );
  });

  $('#birthday_year').on('change', function(){
    var birthday = getBirthday();
    var newBirthday = [birthday[0], birthday[1], $('#birthday_year').val()];
    $('#birthday').val( newBirthday.join('/') );
  });

  $('select').on('change', function(){
    if( $(this).val() ){
      $(this).closest('.floating-label').addClass('has-value');
    }
  });

 });
 </script>
 
 </body>
</html>