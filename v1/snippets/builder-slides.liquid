{% assign slider = page.metafields['slider.slide'] %}
{% assign slidesLimit = 4 %}
{% assign slidesCount = 0 %}

<div class="carousel slide" data-ride="carousel" data-interval="false" id="carousel-{{ page.id }}">
	<div class="carousel-inner">
		{% for i in (1..slidesLimit) %}
			{% assign desktop = 'desktopImage-' | append: i %}
			{% if slider[desktop] == blank %}
				{% continue %}
			{% else %}
				{% assign slidesCount = slidesCount | plus: 1 %}
				{% assign mobile = 'mobileImage-' | append: i %}
				{% assign alt = 'altText-' | append: i %}
				{% assign link = 'link-' | append: i %}
				<div class="item{% if forloop.first == true %} active{% endif %}">
					{% unless slider[link] == blank %}<a href="{{ slider[link] }}">{% endunless %}		
					<picture>
						<source srcset="{{ slider[desktop] }}" media="(min-width: 768px)">
						<img src="{{ slider[mobile] }}" alt="{{ slider[alt] }}">
					</picture>
					{% unless slider[link] == blank %}</a>{% endunless %}
				</div>
			{% endif %}
		{% endfor %}
	</div>
	<ol class="carousel-indicators">
	  {% for i in (1..slidesCount) %}
	  <li data-target="#carousel-{{ page.id }}" data-slide-to="{{ forloop.index0 }}"{% if forloop.first == true %} class="active"{% endif %}></li>
	  {% endfor %}
	</ol>
	<a class="left carousel-control" href="#carousel-{{ page.id }}" role="button" data-slide="prev">
		<span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
		<span class="sr-only">Previous</span>
	</a>
	<a class="right carousel-control" href="#carousel-{{ page.id }}" role="button" data-slide="next">
		<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
		<span class="sr-only">Next</span>
	</a>
</div>